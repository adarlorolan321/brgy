import{J as U,o as a,a as l,b as _,u as e,d as t,e as i,t as n,f as u,w as f,v as h,n as y,g as E,F as b,h as x,j as m,i as P,X as z,k as K}from"./app-c35868b7.js";import{u as $}from"./Crud-8dbe4040.js";import{u as A}from"./Validate-cd57921b.js";import{A as M}from"./AdminLayout-d0688604.js";import"./toastr-e51a8429.js";const T={class:"card card-action"},B={class:"card-header"},D=t("div",{class:"card-action-title align-items-center"},[t("h5",{class:"card-title"},"Promotions")],-1),Y={class:"card-action-element"},O=t("i",{class:"ti ti-plus ti-xs me-1"},null,-1),H={class:"offcanvas offcanvas-end",tabindex:"-1",id:"offCanvasForm","data-bs-backdrop":"static","aria-labelledby":"offCanvasFormLabel"},J={class:"offcanvas-header"},W={id:"offCanvasFormLabel",class:"offcanvas-title"},X={key:0,type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"},G={class:"offcanvas-body pt-0 mx-0 flex-grow-0"},R={class:"form-group mb-3"},Z=t("label",{for:""},[i("Name "),t("span",{class:"required"},"*")],-1),ee={class:"invalid-feedback"},te={class:"form-group mb-3"},se=t("label",{for:""},[i("Promoter Name "),t("span",{class:"required"},"*")],-1),oe={class:"invalid-feedback"},re={class:"form-group mb-3"},ne=t("label",{for:""},[i("Description "),t("span",{class:"required"},"*")],-1),ae={class:"invalid-feedback"},ie={class:"form-group mb-3"},le=t("label",{for:""},[i("Latitude "),t("span",{class:"required"},"*")],-1),de={class:"invalid-feedback"},ce={class:"form-group mb-3"},ue=t("label",{for:""},[i("Longtitude "),t("span",{class:"required"},"*")],-1),pe={class:"invalid-feedback"},_e={class:"form-group mb-3"},me=t("label",{for:""},[i("Expiration Date "),t("span",{class:"required"},"*")],-1),ve={key:0,class:"v-invalid-feedback"},fe={class:"form-group mb-4 dropzone-profile-photo"},he=t("label",{for:"name"},"Upload Photo",-1),ye={key:1},ge={class:"dropzone",ref:"dropzone"},be=t("div",{class:"dz-message needsclick"}," Please Wait ",-1),ke=[be],xe={key:2,class:"v-invalid-feedback"},we={class:"form-group mb-3"},Ce=t("label",{for:""},[i("Distance "),t("span",{class:"required"},"*")],-1),Qe={class:"invalid-feedback"},Ee={key:0,class:"spinner-border me-1",role:"status","aria-hidden":"true"},Pe={key:0,class:"spinner-border me-1",role:"status","aria-hidden":"true"},qe={class:"card-body"},Le={class:"row justify-content-between"},Ne={class:"col-auto"},Ve={class:"d-flex align-items-center gap-2"},je=t("div",{class:"w-auto"},"Show",-1),Fe={class:"flex-1"},Ie=["value"],Se=["value"],Ue=t("div",{class:"w-auto"},"entries",-1),ze={class:"col-auto"},Ke={class:"d-flex gap-2 align-items-center"},$e=t("div",{class:"w-auto"},"Search:",-1),Ae={class:"flex-1"},Me=["value"],Te={class:"table-responsive text-nowrap"},Be={class:"table"},De={class:"table-light"},Ye=t("th",null,null,-1),Oe=t("th",null,"Actions",-1),He={class:"table-border-bottom-0"},Je={key:0},We=t("td",{colspan:"999999",class:"text-center"}," No item found ",-1),Xe=[We],Ge={class:"avatar avatar-lg"},Re=["src"],Ze={style:{width:"35%"}},et={style:{width:"35%"}},tt={style:{width:"35%"}},st={style:{width:"35%"}},ot={style:{width:"35%"}},rt={style:{width:"35%"}},nt={class:"d-flex gap-2"},at=["onClick"],it=t("i",{class:"ti ti-pencil"},null,-1),lt=[it],dt=["onClick"],ct=t("i",{class:"ti ti-trash"},null,-1),ut=[ct],pt={key:0,class:"card-footer py-3 border-top"},_t={class:"row justify-content-between"},mt={class:"col-auto"},vt={class:"table_info"},ft={class:"col-auto"},ht={class:"dataTables_paginate paging_simple_numbers","aria-label":"Page navigation example"},yt={class:"pagination mb-0"},gt=["innerHTML"],bt={layout:M,props:{data:Object},computed:{}},Pt=Object.assign(bt,{__name:"Index",setup(kt){U();const q={name:null,promoter_name:null,description:null,lat:null,lng:null,expiration_date:null,image:null,distance:null},{validateForm:g}=A(),L="promotion";let{isLoadingComponents:N,paginatedData:p,form:r,createPromise:w,updatePromise:C,deletePromise:V,handleCreate:Q,serverQuery:d,handleServerQuery:c,handleEdit:j,formState:k}=$(q,L);return(F,o)=>{const I=P("dropzone"),v=P("table-header");return a(),l(b,null,[_(e(z),{title:"Promotions"}),t("div",T,[t("div",B,[D,t("div",Y,[t("button",{class:"btn btn-primary",type:"button",onClick:o[0]||(o[0]=(...s)=>e(Q)&&e(Q)(...s)),"data-bs-toggle":"offcanvas","data-bs-target":"#offCanvasForm","aria-controls":"offCanvasForm"},[O,i(" Add Promotion ")]),t("div",H,[t("div",J,[t("h5",W,n(e(k)=="create"?"Add":"Update")+" Promotion ",1),e(r).processing?u("",!0):(a(),l("button",X))]),t("div",G,[t("div",R,[Z,f(t("input",{type:"text",class:y(["form-control",{"is-invalid":e(r).errors.name}]),"onUpdate:modelValue":o[1]||(o[1]=s=>e(r).name=s),onInput:o[2]||(o[2]=s=>{e(r).clearErrors("name"),e(g)(["required"],e(r),s.target.value,"name")}),placeholder:"Enter name"},null,34),[[h,e(r).name]]),t("div",ee,n(e(r).errors.name),1)]),t("div",te,[se,f(t("input",{type:"text",class:y(["form-control",{"is-invalid":e(r).errors.promoter_name}]),"onUpdate:modelValue":o[3]||(o[3]=s=>e(r).promoter_name=s),onInput:o[4]||(o[4]=s=>{e(r).clearErrors("promoter_name"),e(g)(["required"],e(r),s.target.value,"promoter_name")}),placeholder:"Enter Promoter Name"},null,34),[[h,e(r).promoter_name]]),t("div",oe,n(e(r).errors.promoter_name),1)]),t("div",re,[ne,f(t("input",{type:"text",class:y(["form-control",{"is-invalid":e(r).errors.description}]),"onUpdate:modelValue":o[5]||(o[5]=s=>e(r).description=s),onInput:o[6]||(o[6]=s=>{e(r).clearErrors("description"),e(g)(["required"],e(r),s.target.value,"description")}),placeholder:"Enter Promoter Name"},null,34),[[h,e(r).description]]),t("div",ae,n(e(r).errors.description),1)]),t("div",ie,[le,f(t("input",{type:"text",class:y(["form-control",{"is-invalid":e(r).errors.lat}]),"onUpdate:modelValue":o[7]||(o[7]=s=>e(r).lat=s),onInput:o[8]||(o[8]=s=>{e(r).clearErrors("lat"),e(g)(["required"],e(r),s.target.value,"lat")}),placeholder:"Enter Latitude"},null,34),[[h,e(r).lat]]),t("div",de,n(e(r).errors.lat),1)]),t("div",ce,[ue,f(t("input",{type:"text",class:y(["form-control",{"is-invalid":e(r).errors.lng}]),"onUpdate:modelValue":o[9]||(o[9]=s=>e(r).lng=s),onInput:o[10]||(o[10]=s=>{e(r).clearErrors("lng"),e(g)(["required"],e(r),s.target.value,"lng")}),placeholder:"Enter Longtitude"},null,34),[[h,e(r).lng]]),t("div",pe,n(e(r).errors.lng),1)]),t("div",_e,[me,f(t("input",{type:"date",class:"form-control dob-picker",placeholder:"YYYY-MM-DD","onUpdate:modelValue":o[11]||(o[11]=s=>e(r).expiration_date=s)},null,512),[[h,e(r).expiration_date]]),e(r).errors.expiration_date?(a(),l("div",ve,n(e(r).errors.expiration_date),1)):u("",!0)]),t("div",fe,[he,e(N)?(a(),E(I,{key:0,collection:"image",url:F.route("api.media.upload"),type:"profile",model:"Promotion\\Promotion",value:e(r).image,onInput:o[12]||(o[12]=s=>{e(r).image=s,e(r).clearErrors("image")}),message:"Drop files here or click to upload profile photo",acceptedFiles:"image/jpeg,image/png",onError:o[13]||(o[13]=s=>{s&&s[0]&&e(r).setError("image",s[0])})},null,8,["url","value"])):(a(),l("div",ye,[t("div",ge,ke,512)])),e(r).errors.image?(a(),l("div",xe,n(e(r).errors.image),1)):u("",!0)]),t("div",we,[Ce,f(t("input",{type:"text",class:y(["form-control",{"is-invalid":e(r).errors.distance}]),"onUpdate:modelValue":o[14]||(o[14]=s=>e(r).distance=s),onInput:o[15]||(o[15]=s=>{e(r).clearErrors("distance"),e(g)(["required"],e(r),s.target.value,"distance")}),placeholder:"Enter Distance"},null,34),[[h,e(r).distance]]),t("div",Qe,n(e(r).errors.distance),1)]),e(k)=="create"?(a(),l("button",{key:0,class:"btn btn-primary",onClick:o[16]||(o[16]=(...s)=>e(w)&&e(w)(...s))},[e(r).processing?(a(),l("span",Ee)):u("",!0),i(" Save ")])):u("",!0),e(k)=="update"?(a(),l("button",{key:1,class:"btn btn-primary",onClick:o[17]||(o[17]=(...s)=>e(C)&&e(C)(...s)),style:{"margin-top":"20px"}},[e(r).processing?(a(),l("span",Pe)):u("",!0),i(" Save changes ")])):u("",!0)])])])]),t("div",qe,[t("div",Le,[t("div",Ne,[t("div",Ve,[je,t("div",Fe,[t("select",{class:"form-select",value:e(d).perPage,onInput:o[18]||(o[18]=s=>e(c)("perPage",s.target.value))},[(a(),l(b,null,x([5,10,25,50,100],s=>t("option",{value:String(s),key:s},n(s),9,Se)),64))],40,Ie)]),Ue])]),t("div",ze,[t("div",Ke,[$e,t("div",Ae,[t("input",{type:"search",placeholder:"Search",class:"form-control",value:e(d).query,onInput:o[19]||(o[19]=s=>e(c)("query",s.target.value))},null,40,Me)])])])])]),t("div",Te,[t("table",Be,[t("thead",De,[t("tr",null,[Ye,_(v,{style:{width:"35%"},onClick:o[20]||(o[20]=s=>e(c)("sort","name")),serverQuery:e(d),serverQueryKey:"name"},{default:m(()=>[i(" Name ")]),_:1},8,["serverQuery"]),_(v,{style:{width:"35%"},onClick:o[21]||(o[21]=s=>e(c)("sort","promoter_name")),serverQuery:e(d),serverQueryKey:"promoter_name"},{default:m(()=>[i(" Promoter Name ")]),_:1},8,["serverQuery"]),_(v,{style:{width:"35%"},onClick:o[22]||(o[22]=s=>e(c)("sort","description")),serverQuery:e(d),serverQueryKey:"description"},{default:m(()=>[i(" Description ")]),_:1},8,["serverQuery"]),_(v,{style:{width:"35%"},onClick:o[23]||(o[23]=s=>e(c)("sort","lat")),serverQuery:e(d),serverQueryKey:"lat"},{default:m(()=>[i(" Latitude ")]),_:1},8,["serverQuery"]),_(v,{style:{width:"35%"},onClick:o[24]||(o[24]=s=>e(c)("sort","lng")),serverQuery:e(d),serverQueryKey:"lng"},{default:m(()=>[i(" Longtitude ")]),_:1},8,["serverQuery"]),_(v,{style:{width:"35%"},onClick:o[25]||(o[25]=s=>e(c)("sort","expiration_date")),serverQuery:e(d),serverQueryKey:"expiration_date"},{default:m(()=>[i(" Expiration Date ")]),_:1},8,["serverQuery"]),_(v,{style:{width:"35%"},onClick:o[26]||(o[26]=s=>e(c)("sort","distance")),serverQuery:e(d),serverQueryKey:"distance"},{default:m(()=>[i(" Distance ")]),_:1},8,["serverQuery"]),Oe])]),t("tbody",He,[e(p).data.length<=0?(a(),l("tr",Je,Xe)):u("",!0),(a(!0),l(b,null,x(e(p).data,s=>(a(),l("tr",{key:s},[t("td",null,[t("div",Ge,[t("img",{style:{"object-fit":"cover"},src:s.image_url,alt:"Avatar",class:"rounded-circle"},null,8,Re)])]),t("td",null,n(s.name),1),t("td",Ze,n(s.promoter_name),1),t("td",et,n(s.description),1),t("td",tt,n(s.lat),1),t("td",st,n(s.lng),1),t("td",ot,n(s.expiration_date),1),t("td",rt,n(s.distance),1),t("td",null,[t("div",nt,[t("a",{class:"btn btn-icon btn-label-primary waves-effect",onClick:S=>e(j)(s),href:"javascript:void(0);"},lt,8,at),t("a",{class:"btn btn-icon btn-label-danger waves-effect",href:"javascript:void(0);",onClick:S=>e(V)(s.id)},ut,8,dt)])])]))),128))])])]),e(p)&&e(p).meta.links?(a(),l("div",pt,[t("div",_t,[t("div",mt,[t("div",vt," Showing "+n(e(p).meta.from)+" to "+n(e(p).meta.to)+" of "+n(e(p).meta.total)+" entries ",1)]),t("div",ft,[t("nav",ht,[t("ul",yt,[(a(!0),l(b,null,x(e(p).meta.links,s=>(a(),l("li",{class:"page-item",key:s},[(a(),E(K(s.url?"inertia-link":"button"),{class:y(["page-link",{active:s.active}]),href:s.url,only:["data","params"]},{default:m(()=>[t("span",{innerHTML:s.label},null,8,gt)]),_:2},1032,["class","href"]))]))),128))])])])])])):u("",!0)])],64)}}});export{Pt as default};
