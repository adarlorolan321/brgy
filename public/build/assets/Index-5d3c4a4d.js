import{_ as H,J as Q,r as W,c as N,o as a,a as i,b as h,u as s,d as e,e as d,t as r,f,w as p,v as m,n as c,g as E,F as k,h as D,i as U,X as J,j as X,k as K,p as Z,l as ee,m as se}from"./app-06a4dc19.js";import{u as oe}from"./Crud-995edade.js";import{u as te}from"./Validate-7fe40d45.js";import{A as le}from"./AdminLayout-f00eb0ea.js";import"./toastr-922d3148.js";const ne="/build/assets/3-300c323f.png";const n=_=>(Z("data-v-6731bc52"),_=_(),ee(),_),re={class:"card card-action custom-container-card"},ae={class:"card-header"},ie=n(()=>e("div",{class:"card-action-title align-items-center"},[e("h4",{class:"fw-bold mb-4 card-title pt-0"}," Driver ")],-1)),de={class:"card-action-element"},ce=n(()=>e("i",{class:"ti ti-user-plus ti-xs me-1"},null,-1)),ue={class:"offcanvas offcanvas-end",tabindex:"-1",id:"offCanvasForm","data-bs-backdrop":"static","aria-labelledby":"offCanvasFormLabel"},pe={class:"offcanvas-header"},_e={id:"offCanvasFormLabel",class:"offcanvas-title"},me={key:0,type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"},ve={class:"offcanvas-body mx-0 flex-grow-0 pt-0"},fe={class:"form-group mb-3"},be=n(()=>e("label",{for:""},[d("First Name "),e("span",{class:"required"},"*")],-1)),he={class:"invalid-feedback"},ge={class:"form-group mb-3"},ye=n(()=>e("label",{for:""},[d("Middle Name "),e("span",{class:"required"},"*")],-1)),ke={class:"invalid-feedback"},we={class:"form-group mb-3"},xe=n(()=>e("label",{for:""},[d("Last Name "),e("span",{class:"required"},"*")],-1)),Ce={class:"invalid-feedback"},Ee={class:"form-group mb-3"},De=n(()=>e("label",{for:""},[d("Gender "),e("span",{class:"required"},"*")],-1)),qe={class:"invalid-feedback"},Ve={class:"form-group mb-3"},Ie=n(()=>e("label",{for:""},[d("Select Province "),e("span",{class:"required"},"*")],-1)),Se={class:"invalid-feedback"},Pe={class:"form-group mb-3"},Le=n(()=>e("label",{for:""},[d("Select City "),e("span",{class:"required"},"*")],-1)),Ne={class:"invalid-feedback"},Ue={class:"form-group mb-3"},Fe=n(()=>e("label",{for:""},[d("Enter Email "),e("span",{class:"required"},"*")],-1)),Me={class:"invalid-feedback"},je={class:"form-group mb-3"},ze=n(()=>e("label",{for:""},[d("Mobile Number "),e("span",{class:"required"},"*")],-1)),Be={class:"invalid-feedback"},Te={class:"form-group mb-3"},Ae=n(()=>e("label",{for:""},[d("Password "),e("span",{class:"required"},"*")],-1)),Re=n(()=>e("input",{type:"text",style:{display:"none"}},null,-1)),Oe={class:"invalid-feedback"},$e={class:"form-group mb-3"},Ye=n(()=>e("label",{for:""},"Confirm Password",-1)),Ge={class:"invalid-feedback"},He={class:"form-group mb-3"},Qe=n(()=>e("label",{for:""},[d("Select Role "),e("span",{class:"required"},"*")],-1)),We={class:"invalid-feedback"},Je={class:"form-group mb-3"},Xe=n(()=>e("label",{for:""},[d("License Number "),e("span",{class:"required"},"*")],-1)),Ke={class:"invalid-feedback"},Ze={class:"form-group mb-3"},es=n(()=>e("label",{for:""},[d("Select License Type "),e("span",{class:"required"},"*")],-1)),ss={class:"invalid-feedback"},os={class:"form-group mb-3"},ts=n(()=>e("label",{for:""},[d("Expiration Date "),e("span",{class:"required"},"*")],-1)),ls={class:"invalid-feedback"},ns={class:"form-group mb-3"},rs=n(()=>e("label",{for:""},"Blood Type",-1)),as={class:"invalid-feedback"},is={class:"form-group mb-4 dropzone-profile-photo"},ds=n(()=>e("label",{for:"name"},"License Front",-1)),cs={key:1},us={class:"dropzone",ref:"dropzone"},ps=n(()=>e("div",{class:"dz-message needsclick"}," Please Wait ",-1)),_s=[ps],ms={key:2,class:"v-invalid-feedback"},vs={class:"form-group mb-4 dropzone-profile-photo"},fs=n(()=>e("label",{for:"name"},"License Back",-1)),bs={key:1},hs={class:"dropzone",ref:"dropzone"},gs=n(()=>e("div",{class:"dz-message needsclick"}," Please Wait ",-1)),ys=[gs],ks={key:2,class:"v-invalid-feedback"},ws={key:0,class:"spinner-border me-1",role:"status","aria-hidden":"true"},xs={key:0,class:"spinner-border me-1",role:"status","aria-hidden":"true"},Cs={class:"card-body"},Es={class:"row justify-content-between"},Ds={class:"col-3"},qs={class:"d-flex align-items-center gap-2"},Vs=n(()=>e("div",{class:"w-auto"},"Show",-1)),Is={class:"flex-1"},Ss=["value"],Ps=["value"],Ls=n(()=>e("div",{class:"w-auto"},"entries",-1)),Ns={class:"col-5"},Us={class:"d-flex gap-2 align-items-center"},Fs=n(()=>e("div",{class:"w-auto"},"Filter by Type:",-1)),Ms={class:"form-group",style:{width:"70%"}},js=["value"],zs=n(()=>e("option",{value:""},"All",-1)),Bs=n(()=>e("option",{value:"Private Driver"},"Private Driver",-1)),Ts=n(()=>e("option",{value:"Company Driver"},"Company Driver",-1)),As=[zs,Bs,Ts],Rs={class:"col-auto"},Os={class:"d-flex gap-2 align-items-center"},$s=n(()=>e("div",{class:"w-auto"},"Search:",-1)),Ys={class:"flex-1"},Gs=["value"],Hs={class:"row"},Qs={class:"card mb-4 custom-card__hero"},Ws={class:"dropdown btn-pinned"},Js=n(()=>e("button",{type:"button",class:"btn dropdown-toggle hide-arrow p-0","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("i",{class:"ti ti-dots-vertical text-muted"})],-1)),Xs={class:"dropdown-menu dropdown-menu-end"},Ks=["onClick"],Zs=["onClick"],eo=["onClick"],so=n(()=>e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),oo=["onClick"],to={class:"card-body"},lo={class:"user-avatar-section"},no={class:"d-flex align-items-center flex-column"},ro=n(()=>e("img",{class:"img-fluid rounded mb-3 pt-1 mt-4",src:ne,height:"100",width:"100",alt:"User avatar"},null,-1)),ao={class:"user-info text-center"},io={class:"mb-2"},co={class:"badge bg-label-secondary mt-1"},uo=n(()=>e("p",{class:"mt-3 small text-uppercase text-muted"},"Details",-1)),po={class:"info-container"},_o={class:"list-unstyled"},mo={class:""},vo=n(()=>e("span",{class:"fw-semibold me-1 small-text"},"Email:",-1)),fo={class:"small-text"},bo={class:"pt-1"},ho=n(()=>e("span",{class:"fw-semibold me-1 small-text"},"Gender:",-1)),go={class:"small-text"},yo=n(()=>e("li",{class:"pt-1"},[e("span",{class:"fw-semibold me-1 small-text"},"Status:"),e("span",{class:"badge bg-label-success small-text"},"Driving..")],-1)),ko={class:"pt-1"},wo=n(()=>e("span",{class:"fw-semibold me-1 small-text"},"Contact:",-1)),xo={class:"small-text"},Co={class:"pt-1"},Eo=n(()=>e("span",{class:"fw-semibold me-1 small-text"},"Address:",-1)),Do={class:"small-text"},qo={class:"d-flex justify-content-center"},Vo=["onClick"],Io=n(()=>e("i",{class:"ti-xs me-1 ti ti-truck me-1"},null,-1)),So={key:0,class:"card-footer py-3"},Po={class:"row justify-content-between"},Lo={class:"col-auto"},No={class:"table_info"},Uo={class:"col-auto"},Fo={class:"dataTables_paginate paging_simple_numbers","aria-label":"Page navigation example"},Mo={class:"pagination mb-0"},jo=["innerHTML"],zo={layout:le,props:{data:Object,provinces:Object},methods:{openModal(_){window.location.href=`/drivers/${_}`},openRescue(_){window.location.href=`/rescuers-logs/${_}`},openRepair(_){window.location.href=`/repairs-log/${_}`}}},Bo=Object.assign(zo,{__name:"Index",setup(_){const{props:F}=Q(),M={first_name:null,last_name:null,middle_name:null,gender:null,province:null,city:null,email:null,mobile_number:null,password:null,password_confirmation:null,role:null,status:null,license_number:null,license_type:null,expiration_date:null,blood_type:null,license_front:null},{validateForm:u}=te(),j="drivers";let{isLoadingComponents:q,paginatedData:b,form:t,createPromise:V,updatePromise:I,deletePromise:z,handleCreate:S,serverQuery:w,handleServerQuery:x,handleEdit:B,formState:C}=oe(M,j);const T=[{name:"Male",value:"male"},{name:"Female",value:"female"},{name:"Prefer not to say",value:"prefer_not_to_say"}],A=["A+","A-","B+","B-","O+","O-","AB+","AB-"],R=[{name:"Private Driver",value:"Private Driver"},{name:"Company Driver",value:"Company Driver"}],O=["Student","Non-Professional","Professional"],$=W(F.provinces||[]),Y=N(()=>{if(console.log("select city"),t.province){const v=$.value.find(l=>l.value===t.province);return v?v.cities:[]}else return[]});return N(()=>(console.log("provinces"),t.province?Y.value.filter(v=>v.province===t.province):[])),(v,l)=>{const g=U("v-select"),P=U("dropzone"),L=se("select");return a(),i(k,null,[h(s(J),{title:"Driver"}),e("div",re,[e("div",ae,[ie,e("div",de,[e("button",{class:"btn btn-primary",type:"button",onClick:l[0]||(l[0]=(...o)=>s(S)&&s(S)(...o)),"data-bs-toggle":"offcanvas","data-bs-target":"#offCanvasForm","aria-controls":"offCanvasForm"},[ce,d(" Add Driver ")]),e("div",ue,[e("div",pe,[e("h5",_e,r(s(C)=="create"?"Add":"Update")+" Driver ",1),s(t).processing?f("",!0):(a(),i("button",me))]),e("div",ve,[e("div",fe,[be,p(e("input",{type:"text",class:c(["form-control",{"is-invalid":s(t).errors.first_name}]),"onUpdate:modelValue":l[1]||(l[1]=o=>s(t).first_name=o),onInput:l[2]||(l[2]=o=>{s(t).clearErrors("first_name"),s(u)(["required"],s(t),o.target.value,"first_name")}),placeholder:"Enter First Name"},null,34),[[m,s(t).first_name]]),e("div",he,r(s(t).errors.first_name),1)]),e("div",ge,[ye,p(e("input",{type:"text",class:c(["form-control",{"is-invalid":s(t).errors.middle_name}]),"onUpdate:modelValue":l[3]||(l[3]=o=>s(t).middle_name=o),onInput:l[4]||(l[4]=o=>{s(t).clearErrors("middle_name"),s(u)(["required"],s(t),o.target.value,"middle_name")}),placeholder:"Enter Middle Name"},null,34),[[m,s(t).middle_name]]),e("div",ke,r(s(t).errors.middle_name),1)]),e("div",we,[xe,p(e("input",{type:"text",class:c(["form-control",{"is-invalid":s(t).errors.last_name}]),"onUpdate:modelValue":l[5]||(l[5]=o=>s(t).last_name=o),onInput:l[6]||(l[6]=o=>{s(t).clearErrors("last_name"),s(u)(["required"],s(t),o.target.value,"last_name")}),placeholder:"Enter Last Name"},null,34),[[m,s(t).last_name]]),e("div",Ce,r(s(t).errors.last_name),1)]),e("div",Ee,[De,p(h(g,{options:T,modelValue:s(t).gender,"onUpdate:modelValue":l[7]||(l[7]=o=>s(t).gender=o),reduce:o=>o.value,label:"name",onInput:l[8]||(l[8]=o=>{s(t).clearErrors("gender"),s(u)(["required"],s(t),o.target.value,"gender")}),class:c(["custom-select",{"is-invalid":s(t).errors.gender}]),placeholder:"Select Gender"},null,8,["modelValue","reduce","class"]),[[L]]),e("div",qe,r(s(t).errors.gender),1)]),e("div",Ve,[Ie,p(e("input",{type:"text",class:c(["form-control",{"is-invalid":s(t).errors.province}]),"onUpdate:modelValue":l[9]||(l[9]=o=>s(t).province=o),onInput:l[10]||(l[10]=o=>{s(t).clearErrors("province"),s(u)(["required"],s(t),o.target.value,"province")}),placeholder:"Enter Province"},null,34),[[m,s(t).province]]),e("div",Se,r(s(t).errors.province),1)]),e("div",Pe,[Le,p(e("input",{type:"text",class:c(["form-control",{"is-invalid":s(t).errors.city}]),"onUpdate:modelValue":l[11]||(l[11]=o=>s(t).city=o),onInput:l[12]||(l[12]=o=>{s(t).clearErrors("city"),s(u)(["required"],s(t),o.target.value,"city")}),placeholder:"Enter City"},null,34),[[m,s(t).city]]),e("div",Ne,r(s(t).errors.city),1)]),e("div",Ue,[Fe,p(e("input",{type:"text",class:c(["form-control",{"is-invalid":s(t).errors.email}]),"onUpdate:modelValue":l[13]||(l[13]=o=>s(t).email=o),onInput:l[14]||(l[14]=o=>{s(t).clearErrors("email"),s(u)(["required"],s(t),o.target.value,"email")}),placeholder:"Enter Email"},null,34),[[m,s(t).email]]),e("div",Me,r(s(t).errors.email),1)]),e("div",je,[ze,p(e("input",{type:"number",class:c(["form-control",{"is-invalid":s(t).errors.mobile_number}]),"onUpdate:modelValue":l[15]||(l[15]=o=>s(t).mobile_number=o),onInput:l[16]||(l[16]=o=>{s(t).clearErrors("mobile_number"),s(u)(["required"],s(t),o.target.value,"mobile_number")}),placeholder:"Enter Mobile Number",autocomplete:"off"},null,34),[[m,s(t).mobile_number]]),e("div",Be,r(s(t).errors.mobile_number),1)]),e("div",Te,[Ae,Re,p(e("input",{type:"password",class:c(["form-control",{"is-invalid":s(t).errors.password}]),"onUpdate:modelValue":l[17]||(l[17]=o=>s(t).password=o),onInput:l[18]||(l[18]=o=>{s(t).clearErrors("password"),s(u)(["required"],s(t),o.target.value,"password")}),placeholder:"Enter Password",autocomplete:"new-password"},null,34),[[m,s(t).password]]),e("div",Oe,r(s(t).errors.password),1)]),e("div",$e,[Ye,p(e("input",{type:"password",class:c(["form-control",{"is-invalid":s(t).errors.password_confirmation}]),"onUpdate:modelValue":l[19]||(l[19]=o=>s(t).password_confirmation=o),onInput:l[20]||(l[20]=o=>{s(t).clearErrors("password_confirmation"),s(u)(["required"],s(t),o.target.value,"password_confirmation")}),placeholder:"Enter Confirm Password"},null,34),[[m,s(t).password_confirmation]]),e("div",Ge,r(s(t).errors.password_confirmation),1)]),e("div",He,[Qe,h(g,{options:R,modelValue:s(t).role,"onUpdate:modelValue":l[21]||(l[21]=o=>s(t).role=o),reduce:o=>o.value,label:"name",onInput:l[22]||(l[22]=o=>{s(t).clearErrors("role"),s(u)(["required"],s(t),o.target.value,"role")}),class:c({"is-invalid":s(t).errors.role}),placeholder:"Select Role"},null,8,["modelValue","reduce","class"]),e("div",We,r(s(t).errors.role),1)]),e("div",Je,[Xe,p(e("input",{type:"text",class:c(["form-control",{"is-invalid":s(t).errors.license_number}]),"onUpdate:modelValue":l[23]||(l[23]=o=>s(t).license_number=o),onInput:l[24]||(l[24]=o=>{s(t).clearErrors("license_number"),s(u)(["required"],s(t),o.target.value,"license_number")}),placeholder:"Enter License Number"},null,34),[[m,s(t).license_number]]),e("div",Ke,r(s(t).errors.license_number),1)]),e("div",Ze,[es,h(g,{options:O,modelValue:s(t).license_type,"onUpdate:modelValue":l[25]||(l[25]=o=>s(t).license_type=o),label:"name",onInput:l[26]||(l[26]=o=>{s(t).clearErrors("license_type"),s(u)(["required"],s(t),o.target.value,"license_type")}),class:c({"is-invalid":s(t).errors.license_type}),placeholder:"Select License Type"},null,8,["modelValue","class"]),e("div",ss,r(s(t).errors.license_type),1)]),e("div",os,[ts,p(e("input",{type:"date",class:"form-control dob-picker",placeholder:"YYYY-MM-DD","onUpdate:modelValue":l[27]||(l[27]=o=>s(t).expiration_date=o)},null,512),[[m,s(t).expiration_date]]),e("div",ls,r(s(t).errors.expiration_date),1)]),e("div",ns,[rs,p(h(g,{options:A,modelValue:s(t).blood_type,"onUpdate:modelValue":l[28]||(l[28]=o=>s(t).blood_type=o),label:"name",onInput:l[29]||(l[29]=o=>{s(t).clearErrors("blood_type"),s(u)(["required"],s(t),o.target.value,"blood_type")}),class:c(["custom-select",{"is-invalid":s(t).errors.blood_type}]),placeholder:"Select Blood Type"},null,8,["modelValue","class"]),[[L]]),e("div",as,r(s(t).errors.blood_type),1)]),e("div",is,[ds,s(q)?(a(),E(P,{key:0,collection:"license_front",url:v.route("api.media.upload"),type:"profile",model:"User",value:s(t).license_front,onInput:l[30]||(l[30]=o=>{s(t).license_front=o,s(t).clearErrors("license_front")}),message:"Drop files here or click to upload profile photo",acceptedFiles:"image/jpeg,image/png",onError:l[31]||(l[31]=o=>{o&&o[0]&&s(t).setError("license_front",o[0])})},null,8,["url","value"])):(a(),i("div",cs,[e("div",us,_s,512)])),s(t).errors.license_front?(a(),i("div",ms,r(s(t).errors.license_front),1)):f("",!0)]),e("div",vs,[fs,s(q)?(a(),E(P,{key:0,collection:"license_back",url:v.route("api.media.upload"),type:"profile",model:"User",value:s(t).license_back,onInput:l[32]||(l[32]=o=>{s(t).license_back=o,s(t).clearErrors("license_back")}),message:"Drop files here or click to upload profile photo",acceptedFiles:"image/jpeg,image/png",onError:l[33]||(l[33]=o=>{o&&o[0]&&s(t).setError("license_back",o[0])})},null,8,["url","value"])):(a(),i("div",bs,[e("div",hs,ys,512)])),s(t).errors.license_back?(a(),i("div",ks,r(s(t).errors.license_back),1)):f("",!0)]),s(C)=="create"?(a(),i("button",{key:0,class:"btn btn-primary",onClick:l[34]||(l[34]=(...o)=>s(V)&&s(V)(...o))},[s(t).processing?(a(),i("span",ws)):f("",!0),d(" Submit ")])):f("",!0),s(C)=="update"?(a(),i("button",{key:1,class:"btn btn-primary",onClick:l[35]||(l[35]=(...o)=>s(I)&&s(I)(...o))},[s(t).processing?(a(),i("span",xs)):f("",!0),d(" Submit changes ")])):f("",!0)])])])]),e("div",Cs,[e("div",Es,[e("div",Ds,[e("div",qs,[Vs,e("div",Is,[e("select",{class:"form-select",value:s(w).perPage,onInput:l[36]||(l[36]=o=>s(x)("perPage",o.target.value))},[(a(),i(k,null,D([5,10,25,50,100],o=>e("option",{value:String(o),key:o},r(o),9,Ps)),64))],40,Ss)]),Ls])]),e("div",Ns,[e("div",Us,[Fs,e("div",Ms,[e("select",{class:"form-select",id:"basic-default-country",value:s(w).role,onInput:l[37]||(l[37]=o=>s(x)("role",o.target.value))},As,40,js)])])]),e("div",Rs,[e("div",Os,[$s,e("div",Ys,[e("input",{type:"search",placeholder:"Search",class:"form-control",value:s(w).query,onInput:l[38]||(l[38]=o=>s(x)("query",o.target.value))},null,40,Gs)])])])])]),e("div",Hs,[(a(!0),i(k,null,D(_.data.data,(o,G)=>(a(),i("div",{class:"col-xl-4 col-lg-4 col-md-4",key:G.id},[e("div",Qs,[e("div",Ws,[Js,e("ul",Xs,[e("li",null,[e("a",{class:"dropdown-item",onClick:y=>v.openModal(o.id)},"Drive Logs",8,Ks)]),e("li",null,[e("a",{class:"dropdown-item",onClick:y=>v.openRepair(o.id)},"Repair Logs",8,Zs)]),e("li",null,[e("a",{class:"dropdown-item",onClick:y=>v.openRescue(o.id)},"Rescue Logs",8,eo)]),so,e("li",null,[e("a",{class:"dropdown-item text-danger",onClick:y=>s(z)(o.id)},"Delete",8,oo)])])]),e("div",to,[e("div",lo,[e("div",no,[ro,e("div",ao,[e("h4",io,r(o.name),1),e("span",co,r(o.role),1)])])]),uo,e("div",po,[e("ul",_o,[e("li",mo,[vo,e("span",fo,r(o.email),1)]),e("li",bo,[ho,e("span",go,r(o.gender?o.gender:"No Data"),1)]),yo,e("li",ko,[wo,e("span",xo,r(o.mobile_number?o.mobile_number:"No Data"),1)]),e("li",Co,[Eo,e("span",Do,r(o.province||o.city?`${o.province||""} ${o.city||""}`:"No Data"),1)])]),e("div",qo,[o.role=="Company Driver"?(a(),i("a",{key:0,href:"javascript:;",class:"btn btn-primary d-flex align-items-center me-3",onClick:y=>s(B)(o)},[Io,d("Manage Driver ")],8,Vo)):f("",!0)])])])])]))),128))]),s(b)&&s(b).meta.links?(a(),i("div",So,[e("div",Po,[e("div",Lo,[e("div",No," Showing "+r(s(b).meta.from)+" to "+r(s(b).meta.to)+" of "+r(s(b).meta.total)+" entries ",1)]),e("div",Uo,[e("nav",Fo,[e("ul",Mo,[(a(!0),i(k,null,D(s(b).meta.links,o=>(a(),i("li",{class:"page-item",key:o},[(a(),E(K(o.url?"inertia-link":"button"),{class:c(["page-link",{active:o.active}]),href:o.url,only:["data","params"]},{default:X(()=>[e("span",{innerHTML:o.label},null,8,jo)]),_:2},1032,["class","href"]))]))),128))])])])])])):f("",!0)])],64)}}}),Yo=H(Bo,[["__scopeId","data-v-6731bc52"]]);export{Yo as default};
